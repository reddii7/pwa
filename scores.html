<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WAGS</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="app-icons/icon-32x32.png" sizes="32x32">
  <link rel="apple-touch-icon" href="app-icons/icon-180x180.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="icons/around-icons.min.css">
  <link rel="stylesheet" media="screen" href="css/theme.min.css">
  <link rel="stylesheet" media="screen" href="css/page.css">
  <script>
    window.onload = function () {
      const preloader = document.querySelector('.page-loading');
      preloader.classList.remove('active');
      setTimeout(() => preloader.remove(), 1500);
    };
  </script>
</head>

<body>
  <!-- Page loading spinner -->
  <div class="page-loading active">
    <div class="page-loading-inner">
      <div class="page-spinner"></div>
      <span>Loading...</span>
    </div>
  </div>

  <main class="page-wrapper">
    <header class="navbar navbar-expand-lg fixed-top bg-dark">
      <div class="container">
        <a class="navbar-brand pe-sm-3" href="index.html">
          <img src="logo-white.png" alt="WAGS Logo" style="max-height: 20px;">
        </a>
        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation"> <!-- ms-auto keeps it to the right of the toggler -->
          <span class="navbar-toggler-icon"></span>
        </button>
        <nav class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav navbar-nav-scroll ms-auto" style="--ar-scroll-height: 520px;">
            <li class="nav-item"><a class="nav-link" href="scores.html">Scores</a></li>
            <li class="nav-item"><a class="nav-link" href="handicaps.html">Handicaps</a></li>
            <li class="nav-item"><a class="nav-link" href="best14.html">Best 14</a></li>
            <li class="nav-item"><a class="nav-link" href="leagues.html">Leagues</a></li>
            <li class="nav-item"><a class="nav-link" href="rscup.html">RS Cup</a></li>
            <li class="nav-item"><a class="nav-link" href="#faqAccordion" data-scroll>FAQ's</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <section class="container py-4">
      <div class="row row-cols-1 g-4 weekly-summary-cards" id="weeklySummaryCardsContainer">
        <!-- Weekly summary cards will be injected here by JavaScript -->
      </div>
    </section>

    <div id="modalsContainer"></div>
  </main>

  <section class="container py-5">
    <h2 class="text-center mb-4">Frequently Asked Questions</h2>
    <div class="accordion" id="faqAccordion">
      <!-- Handicap Rules FAQ -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqHeadingHandicap">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseHandicap" aria-expanded="false" aria-controls="faqCollapseHandicap">
            Handicap Rules
          </button>
        </h2>
        <div id="faqCollapseHandicap" class="accordion-collapse collapse" aria-labelledby="faqHeadingHandicap" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            <p><strong>Initial Handicap Calculation:</strong><br>New WAGS handicap calculations are 3/4 of your club handicap, then divided by 2.</p>
            <hr class="my-3">
            <p><strong>Handicap Adjustments based on Stableford Score (Par = 20 points):</strong></p>
            <ul>
              <li><strong>Category 1 Golfers:</strong>
                <ul>
                  <li>Buffer zone: 19 points.</li>
                  <li>Increased by 0.1 for any score below par points (outside buffer zone).</li>
                  <li>Reduced by 0.1 for each point scored above par.</li>
                </ul>
              </li>
              <li class="mt-2"><strong>Category 2 Golfers:</strong>
                <ul>
                  <li>Buffer zone: 18 points.</li>
                  <li>Increased by 0.1 for any score below par points (outside buffer zone).</li>
                  <li>Reduced by 0.2 for each point scored above par.</li>
                </ul>
              </li>
              <li class="mt-2"><strong>Category 3 Golfers:</strong>
                <ul>
                  <li>Buffer zone: 17 points.</li>
                  <li>Increased by 0.1 for any score below par points (outside buffer zone).</li>
                  <li>Reduced by 0.3 for each point scored above par.</li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Best 14 Rules FAQ -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqHeadingBest14">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseBest14" aria-expanded="false" aria-controls="faqCollapseBest14">
            Best 14 Rules
          </button>
        </h2>
        <div id="faqCollapseBest14" class="accordion-collapse collapse" aria-labelledby="faqHeadingBest14" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            <p>Best 14 tracks each player's best 14 scores from the weekly competitions throughout the season.</p>
            <p>The player with the highest aggregate score from their best 14 rounds at the end of the season is crowned the "Best 14" champion.</p>
            <ul>
              <li>Only your top 14 scores count.</li>
              <li>Scores are automatically updated after each weekly competition.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- League Rules FAQ -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqHeadingLeague">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseLeague" aria-expanded="false" aria-controls="faqCollapseLeague">
            League Rules
          </button>
        </h2>
        <div id="faqCollapseLeague" class="accordion-collapse collapse" aria-labelledby="faqHeadingLeague" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            <p>To keep everyones season going we play individual leagues. The top & bottom 3 players swap places at the end of each season.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer mt-auto py-4 bg-dark">
    <div class="container text-center">
      <span class="text-muted">&copy; 2024 WAGS. All rights reserved.</span>
    </div>
  </footer>

  <script src="js/theme.min.js"></script>
  <script src="js/dynamic-content.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script>
    window.addEventListener('load', () => {
      gsap.registerPlugin(ScrollTrigger);

      const tl = gsap.timeline({ defaults: { ease: "power2.out" } });
      tl.from(".navbar-nav .nav-item", {
        duration: 0.5, opacity: 0, y: -20, stagger: 0.07
      }, "+=0.1");
      // This animation is for a general h2, kept as is.
      tl.from("section.container > h2.text-center", {
        duration: 0.6, y: 25, opacity: 0, stagger: 0.15
      }, "-=0.2");

      // Animate weekly summary cards as they scroll past
      // Ensure cards are loaded before this runs. If dynamic-content.js loads them,
      // this might need to be called after they are injected or use a MutationObserver.
      // For now, assuming cards are present or will be by the time 'load' fires and GSAP executes.
      const cards = gsap.utils.toArray(".weekly-summary-cards .col");
      if (cards.length > 0) {
        cards.forEach(card => {
          gsap.to(card, {
            y: () => -card.offsetHeight, // Move card upwards by its full height
            opacity: 0, // Fade card out
            ease: "none", // With scrub, ease is less critical, 'none' for direct mapping
            scrollTrigger: {
              trigger: card,
              start: "top top", // Start when the top of the card reaches the top of the viewport
              end: "bottom top", // End when the bottom of the card reaches the top of the viewport
              scrub: 0.5,       // Smooth scrubbing, value is lag smoothing (e.g., 0.5 seconds)
              // markers: true, // Uncomment for debugging ScrollTrigger positions
            }
          });
        });
      } else {
        // Fallback or observer if cards are loaded dynamically after this script runs
        // For example, you could use a MutationObserver on #weeklySummaryCardsContainer
        // to apply animations when .col elements are added.
        console.log("No weekly summary cards found on load to animate with ScrollTrigger immediately.");
      }

    });

    let lastScrollTop = 0;
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      if (scrollTop > lastScrollTop && scrollTop > navbar.offsetHeight) { // Only hide if scrolling down & past navbar
        navbar.classList.add('hidden');
      } else {
        navbar.classList.remove('hidden');
      }
      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    });

    // Close navbar collapse when a nav link is clicked
    const navLinks = document.querySelectorAll('#navbarNav .nav-link');
    const navCollapseElement = document.getElementById('navbarNav');
    if (navCollapseElement) {
      const bsCollapse = new bootstrap.Collapse(navCollapseElement, {
        toggle: false // Prevent auto-toggle on initialization
      });
      navLinks.forEach(link => {
        link.addEventListener('click', () => {
          if (navCollapseElement.classList.contains('show')) {
            bsCollapse.hide();
          }
        });
      });
    }
  </script>
</body>
</html>